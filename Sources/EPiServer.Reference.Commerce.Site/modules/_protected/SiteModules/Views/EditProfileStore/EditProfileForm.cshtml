@using EPiServer.Shell.Navigation
@inherits WebViewPage<EPiServer.Reference.Commerce.Site.modules._protected.SiteModules.ProfileStore.EditProfileStoreViewModel>
@Html.Raw(Html.CreatePlatformNavigationMenu())


<section class="main-container col2-right-layout">
    <div class="main container">
        <div class="row">
            <div class="col-main col-sm-9">
                <div class="page-title">
                    <h2>@Html.Translate("/ProfileStore/Edit/Header")</h2>
                </div>
                <div class="col-xs-12 col-md-9">
                    @{
                        using (Html.BeginForm("SaveProfile", "EditProfileStore", FormMethod.Post))
                        {
                            <div class="row">
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Name)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Name, new { @class = "form-control" })
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.ProfileManager)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.ProfileManager, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.Email)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.Email, new { @class = "form-control" })
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.JobTitle)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.JobTitle, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.Picture)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.Picture, new { @class = "form-control" })
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.Website)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.Website, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.Phone)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.Phone, new { @class = "form-control" })
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.Mobile)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.Mobile, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.StreetAddress)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.StreetAddress, new { @class = "form-control" })
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.City)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.City, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.State)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.State, new { @class = "form-control" })
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.Company)
                                    @Html.TextBoxFor(x => x.ProfileStoreModel.Info.Company, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.Country)
                                    @Html.DropDownListFor(x => x.ProfileStoreModel.Info.Country, new SelectList(Model.ProfileStoreModel.CountryOptions, "Name", "Name", Model.ProfileStoreModel.Info.Country), new { @class = "form-control" })
                                </div>
                                <div class="form-group col-md-6">
                                    @Html.LabelFor(x => x.ProfileStoreModel.Info.InferredCountry)
                                    @Html.DropDownListFor(x => x.ProfileStoreModel.Info.InferredCountry, new SelectList(Model.ProfileStoreModel.CountryOptions, "Name", "Name", Model.ProfileStoreModel.Info.InferredCountry), new { @class = "form-control" })
                                </div>
                            </div>

                            <div id="payloadForm">
                                <h3>Payload</h3>
                                @{
                                    //Row to clone when add payload row
                                    <div class="row payload-row" style="display:none">
                                        <div class="form-group col-xs-12 col-sm-5 col-md-5">
                                            <input type="text" name="key" class="form-control" />
                                        </div>
                                        <div class="form-group col-xs-12 col-sm-5 col-md-5">
                                            <input type="text" name="value" class="form-control" />
                                        </div>
                                        <div class="col-xs-12 col-sm-2 col-md-2" style="margin-top: 8px">
                                            <a href="#" class="btn btn-danger btn-xs delete-icon">
                                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            </a>
                                        </div>
                                    </div>

                                    //Avaiable payloads
                                    foreach (var item in Model.ProfileStoreModel.Payload)
                                    {
                                        <div class="row payload-row">
                                            <div class="form-group col-xs-12 col-sm-5 col-md-5">
                                                <input type="text" name="key" value="@item.Key" class="form-control" />
                                            </div>
                                            <div class="form-group col-xs-12 col-sm-5 col-md-5">
                                                <input type="text" name="value" value="@item.Value" class="form-control" />
                                            </div>
                                            <div class="col-xs-12 col-sm-2 col-md-2" style="margin-top: 8px">
                                                <a href="#" class="btn btn-danger btn-xs delete-icon">
                                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                                </a>
                                            </div>
                                        </div>
                                    }
                                }

                                @Html.HiddenFor(x => x.ProfileStoreModel.JsonPayload, new { @id = "hfJsonPayload" })
                                @Html.HiddenFor(x => x.ProfileStoreModel.ProfileId)
                                @Html.HiddenFor(x => x.ProfileStoreModel.Scope)
                                <a class="btn btn-primary js-add-row-btn">@Html.Translate("/ProfileStore/Form/Label/AddRow")</a>
                                <button type="submit" class="btn btn-primary">@Html.Translate("/ProfileStore/Form/Label/Submit")</button>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</section>